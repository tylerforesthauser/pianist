#!/usr/bin/env python3
"""Launcher script for pianist CLI.

This script ensures .pth files are processed before importing the package.
Use this if 'python -m pianist' doesn't work.
"""
import site
import sys
from pathlib import Path

# Process .pth files for editable installs
site.main()

# Manually process .pth files
try:
    import sysconfig
    site_packages = Path(sysconfig.get_path("purelib"))
    if site_packages.exists():
        pth_files = list(site_packages.glob("__editable__.*.pth"))
        for pth_file in pth_files:
            if "pianist" in pth_file.name:
                pth_path = pth_file.read_text().strip()
                if pth_path and Path(pth_path).exists() and str(pth_path) not in sys.path:
                    sys.path.insert(0, str(pth_path))
except Exception:
    pass

# Fallback: add src to path if needed
try:
    from pianist.cli import main
except (ImportError, ModuleNotFoundError):
    # Find the project root and add src to path
    project_root = Path(__file__).parent
    src_path = project_root / "src"
    if src_path.exists() and str(src_path) not in sys.path:
        sys.path.insert(0, str(src_path))
    from pianist.cli import main

if __name__ == "__main__":
    sys.exit(main())

