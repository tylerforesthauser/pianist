{
  "description": "Top-level spec that an AI model should emit as JSON.\n\nTime units:\n- start/duration are in beats (quarter note == 1 beat for denominator=4).\n- For other denominators, \"beat\" still means a quarter note beat for simplicity.\n  (This keeps time math predictable for models.)",
  "properties": {
    "bpm": {
      "minimum": 20,
      "type": "number"
    },
    "time_signature": {
      "properties": {
        "numerator": {
          "maximum": 32,
          "minimum": 1,
          "type": "integer"
        },
        "denominator": {
          "enum": [
            "1",
            "2",
            "4",
            "8",
            "16",
            "32"
          ],
          "type": "string"
        }
      },
      "required": [
        "numerator"
      ],
      "type": "object"
    },
    "key_signature": {
      "type": "string"
    },
    "ppq": {
      "maximum": 9600,
      "minimum": 24,
      "type": "integer"
    },
    "tracks": {
      "items": {
        "properties": {
          "name": {
            "type": "string"
          },
          "channel": {
            "maximum": 15,
            "minimum": 0,
            "type": "integer"
          },
          "program": {
            "maximum": 127,
            "minimum": 0,
            "type": "integer"
          },
          "events": {
            "items": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string"
                },
                "start": {
                  "type": "number",
                  "minimum": 0
                }
              },
              "required": [
                "type",
                "start"
              ]
            },
            "type": "array"
          }
        },
        "type": "object"
      },
      "type": "array"
    }
  },
  "type": "object"
}